<!doctype html>
<html ng-app="PlanboxPMApp">
  <!-- vim: ts=2 sw=2 :
  -->
  <head>
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="angular-tbUtils.js"></script>
    <script src="bower_components/angular-filters/build/angular-filters.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="bower_components/lodash/dist/lodash.js"></script>
    <script src="app.js"></script>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  </head>
  <body class="container">
  <h1>Product Management</h1>
  <div ng-controller="PMListController">
      <table class="table">
          <tr>
              <th>Idea</th>
              <th colspan=2>Value</th>
              <th colspan=2>Cost</th>
              <th>Score</th>
          </tr>
          <tr>
              <th>&nbsp;</th>
              <th>Marginal $$$</th>
              <th>PM Fit</th>
              <th>Time To Build</th>
              <th>Time Risk</th>
              <th>&nbsp;</th>
          </tr>
          <tr ng-repeat="story in pmStories" ng-controller="PMItemController">
              <td>
                  <!--
                  <a ng-href="https://www.planbox.com/initiatives/6887#story_pane_tab=tasks&timeframe=backlog&story_id={{story.pbStory.id}}" target="planbox">{{story.pbStory.name}}</a>
                  -->
                  <h4 ng-click="showStoryDetails = !showStoryDetails">{{story.pbStory.name}}</h4>
                  <div ng-show="showStoryDetails">
                    <h5>Tasks</h5>
                    <ul>
                      <li ng-repeat="task in story.pbStory.tasks">
                        <strong>{{task.name}}</strong>
                        <p ng-show="task.description">{{task.description}}</p>
                      </li>
                    </ul>
                    <h5>Description</h5>
                    <div ng-bind-html="story.pbStory.description"></div>
                  </div>
              </td>
              <td>
                  <select ng-model="story.pmInfo.pm_revenue" ng-options="value as label for (value, label) in selectOptions.pm_revenue"></select>
              </td>
              <td>
                  <select ng-model="story.pmInfo.pm_fit" ng-options="value as label for (value, label) in selectOptions.pm_fit"></select>
              </td>
              <td>
                  <select ng-model="story.pmInfo.pm_time" ng-options="value as label for (value, label) in selectOptions.pm_time"></select>
              </td>
              <td>
                  <select ng-model="story.pmInfo.pm_risk" ng-options="value as label for (value, label) in selectOptions.pm_risk"></select>
              </td>
              <td>{{story.pmInfo.weightedPm}}</td>
          </tr>
      </table>
  </div>
  </body>
</html>

